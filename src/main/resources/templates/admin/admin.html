<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/common.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>🎬</text></svg>"></link>
    <title>리뷰플러스 관리자</title>  
</head>
<body>
<div class="dashboard-container">
	<!-- 사이드바 시작 -->
	<aside id="sidebar">
		<div class="sidebar-widget">
			<div class="sidebar-logo">
				<a href="/"><img src="/images/logo.png" alt="logo" class="logoimg"></a>
			</div>
			<button class="toggle-btn" type="button">
            	<i id="icon" class='bx bx-chevrons-right'></i>  
            </button>
		</div>
		<!-- 사이드바 nav -->
		<ul class="sidebar-nav">
			<li class="sidebar-item">
				<a href="/Admin/AdminHome" class="sidebar-link">
					<i id="icon" class='bx bxs-home'></i> 
					<span>관리자 홈</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="/Admin/AdminUser" class="sidebar-link">
					<i id="icon" class='bx bx-user'></i> 
					<span>회원 관리</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="/Admin/AdminMovie" class="sidebar-link">
					<i id="icon" class='bx bx-movie'></i> 
					<span>영화 관리</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="/Admin/AdminReview" class="sidebar-link">
					<i id="icon" class='bx bx-pencil'></i> 
					<span>리뷰 관리</span>
				</a>
			</li>
		</ul>
		<div class="sidebar-footer">
			<a href="/logout" class="sidebar-link">
				<i id="icon" class='bx bx-log-out'></i>
				<span>로그아웃</span>
			</a>
		</div>
	</aside>
    <!-- 사이드바 끝 -->
	
	<!-- 사이드바 옆 메인 시작 -->
	<div class="main">
		<div class="content">
			<h2>관리자 홈</h2>
			<div class="dashboard-container">
				<div class="main-cards">
					<div class="card">
						<div class="card-content">
							<h6 class="title">전체 댓글 수</h6>
							<h6 class="amount" th:text="${ReplyCount}"></h6>
						</div>
					</div>
					<div class="card">
						<div class="card-content">
							<h6 class="title">휴면 회원 수</h6>
							<h6 class="amount" th:text ="${TotalDormantUser}"></h6>
						</div>
					</div>
					<div class="card">
						<div class="card-content">
							<h6 class="title">전체 리뷰 수</h6>
							<h6 class="amount" th:text="${ReviewCount}" ></h6>
						</div>
					</div>
					<div class="card">
						<div class="card-content">
							<h6 class="title">전체 가입자 수</h6>
							<h6 class="amount" th:text="${JoinCount}"></h6>
						</div>
					</div>
				</div>
			</div>
			
			<h2>최근 가입자</h2>
			<div class="dashboard-container">
				<div class="dashboard-table">
					<table class="table">
						<tr>
							<th>아이디</th>
							<th>닉네임</th>
							<th>이메일</th>
							<th>가입일</th>
						</tr>
						<tr th:each ="user : ${allUserList}"
							th:data-url ="@{/Admin/AdminUserDetail/{userId}(userId=${user.userId})}"
							onclick="UserDetailLink(this);" id = "UserList">
							<td th:text="${user.userId}"></td>
							<td th:text="${user.nickname}"></td>
							<td th:text="${user.email}"></td>
							<td th:text="${#temporals.format(user.createdAt , 'yyyy-MM-dd HH:mm:ss')}"></td>
						</tr>
						
					</table>
				</div>
			</div>
			<h2>최근 리뷰</h2>
			<div class="dashboard-container">
				<div class="dashboard-table">
					<table class="table">
						<tr>
							<th>번호</th>
							<th>닉네임</th>
							<th>영화제목</th>
							<th>리뷰내용</th>
							<th>등록일</th>
						</tr>
						<tr th:each = "reviews : ${allUserReview}" 
							th:data-url="@{/Admin/AdminReviewDetail/{reviewId}(reviewId=${reviews.reviewId})}"
							onclick="UserDetailLink(this);"
							id = "UserReviewsList">
							<td th:text ="${reviews.reviewId}"></td>
							<td th:text ="${reviews.nickname}" ></td>
							<td th:text ="${reviews.title}"></td>
							<td th:text ="${reviews.comment}"></td>
							<td th:text ="${reviews.regDate}">
						</tr>
					</table>
				</div>
			</div>
		</div>
		<!-- 푸터 -->
		<footer class="footer">
			<div class="dashboard-container">
				<div class="copyright-text">
					<a href="/">©Copyright 2025 by ReviewPlus</a>
				</div>
			</div>
		</footer>
	</div><!-- 사이드바 옆 메인 끝 -->
</div>

<script src="/js/admin.js"></script>
	
</body>
</html>